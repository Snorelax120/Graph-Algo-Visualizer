<!DOCTYPE html>
<head>

</head>
<body>
<div id="container"></div>
<script type="module">

import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

const svg1 = d3.create('svg').attr('viewBox', [0, 0, 1000, 1000]);

const graph = {
    nodes: ['a', 'b', 'c', 'd'],
    edges: [
        ['b', 'c'],
        ['c', 'd'],
    ]
};

function appendCircles(svg1, graph) {
    const nodes = graph.nodes;
    const edges = graph.edges;
    const circleSpacing = 200;
    const circleRadius = 50;
    const circles = {};
    nodes.forEach((node, index) => {
        const cx = index * circleSpacing + circleRadius;
        const circle = svg1.append('circle')
            .attr('cx', cx)
            .attr('cy', '500')
            .attr('r', circleRadius)
            .attr('fill', 'green');
        circles[node] = circle;
        svg1.append('text')
            .attr('x', cx)
            .attr('y', '500')
            .attr('text-anchor', 'middle')
            .attr('dominant-baseline', 'central')
            .text(node)
            .attr('font-family', 'Arial')
            .attr('font-size', '15px')
            .attr('fill', 'black');
    });
    edges.forEach(([source, target]) => {
        const sourceCircle = circles[source];
        const targetCircle = circles[target];
        if (sourceCircle && targetCircle) {
            const x1 = parseFloat(sourceCircle.attr('cx')) + circleRadius;
            const y1 = parseFloat(sourceCircle.attr('cy'));
            const x2 = parseFloat(targetCircle.attr('cx')) - circleRadius;
            const y2 = parseFloat(targetCircle.attr('cy'));
            svg1.append('line')
                .attr('x1', x1)
                .attr('y1', y1)
                .attr('x2', x2)
                .attr('y2', y2)
                .attr('stroke', 'black')
                .attr('marker-end', 'url(#arrowhead)');
        }
    });
    return circles;
}

svg1.append('defs')
    .append('marker')
    .attr('id', 'arrowhead')
    .attr('viewBox', '-10 -10 20 20')
    .attr('markerWidth', 10)
    .attr('markerHeight', 10)
    .append('path')
    .attr('d', 'M-10,-6L0,0L-10,6')
    .style('fill', 'black');

const circles = appendCircles(svg1, graph);

const returnValue = svg1.node();

container.append(returnValue);

</script>
</body>
